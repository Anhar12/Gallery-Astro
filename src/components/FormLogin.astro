---
---

<form id="login-form" method="post" action="" enctype="multipart/form-data" class="p-4 pt-2" autocomplete="off">
    <div class="mb-5 mt-3 relative group">
        <label for="email" class="text-gray-500 text-sm absolute transition-all duration-300 transform -translate-y-1/2 top-1/2 left-0 mx-2 bg-white group-focus-within:top-0 group-focus-within:text-xs group-focus-within:px-1 group-focus-within:text-sky-600">Email</label>
        <input type="text" id="email" name="email" class="w-full p-2 ring ring-gray-300 outline-none focus:ring-sky-600 text-sm">
        <span class="absolute right-0 top-1/2 transform -translate-y-1/2 text-gray-500 group-focus-within:text-sky-600 p-2 cursor-pointer transition-all duration-300">
            <i class="fa-solid fa-at"></i>
        </span>
    </div>

    <div class="mb-5 relative group">
        <label for="password" class="text-gray-500 text-sm absolute transition-all duration-300 transform -translate-y-1/2 top-1/2 left-0 mx-2 bg-white group-focus-within:top-0 group-focus-within:text-xs group-focus-within:px-1 group-focus-within:text-sky-600">Password</label>
        <input type="password" id="password" name="password" data-type="password" class="w-full p-2 ring ring-gray-300 outline-none focus:ring-sky-600 text-sm">
        <span class="absolute right-0 top-1/2 transform -translate-y-1/2 text-gray-500 group-focus-within:text-sky-600 p-2 cursor-pointer transition-all duration-300">
            <i class="fa-solid fa-lock"></i>
        </span>
    </div>

    <button type="submit" class="w-full cursor-pointer group relative mb-4">
        <div class="uppercase font-semibold bg-gradient-to-r from-sky-700 to-sky-900 text-white py-2 px-4 text-sm group-hover:from-sky-900 group-hover:to-sky-900 transition-colors duration-300 flex justify-center gap-3 items-center">
        Login <i class="fas fa-arrow-right-to-bracket"></i>
        </div>

        <div class="w-full h-full border border-sky-900 absolute transform -translate-y-1/2 -translate-x-1/2 left-[calc(50%+2px)] top-[calc(50%+2px)] -z-10"></div>
    </button>

    <div class="text-gray-800 text-sm flex justify-center gap-1 items-center">
        Belum punya akun 
        <button type="button" id="login-regis" class="text-sky-600 cursor-pointer">regis disini boss</button>
    </div>
</form>

<script>
    import Swal from 'sweetalert2';

    function showLoading() {
        $('#loading-spinner').removeClass('hidden');
    }

    function hideLoading() {
        $('#loading-spinner').addClass('hidden');
    }

    $('#login-form').on('submit', function (e) {
        e.preventDefault();
        
        $.ajax({
            url: '/api/login',
            method: 'POST',
            data: $(this).serialize(),
            beforeSend: function () {
                showLoading();
            },
            success: function (res) {
                Swal.fire({
                    icon: 'success',
                    title: 'Login Successfully',
                    text: 'Login successfully.',
                }).then(() => {
                    window.location.reload();
                });
            },
            error: function (xhr) {
                const message = xhr.responseText || 'Unknown error';
                Swal.fire({
                    icon: 'error',
                    title: 'Login Failed',
                    text: 'Login failed: ' + message,
                });
            },
            complete: function () {
                hideLoading();
            }
        });
    });
</script>